<div class="row">
   <%= simple_form_for(@food, url: admin_food_path(@food)) do |f| %>
      <% if @food.errors.any? %>
         <div id="error_explanation">
            <h2><%= pluralize(@food.errors.count, "error") %> prohibited this food from being saved:</h2>
            <ul>
               <% @food.errors.full_messages.each do |message| %>
                 <li><%= message %></li>
               <% end %>
            </ul>
         </div>
      <% end %>
      <div class="row">
			<div class="small-10 medium-5 large-5 columns" id="restaurant-select">
            <%= f.association :restaurant, collection: Restaurant.all.order(:name), as: :select, :label_method => lambda { |restaurant| "#{restaurant.name}" } %>
         </div>
         <div class="small-2 medium-2 large-2 columns">
            <br>TODO Filter =>
         </div>
			<div class="small-10 medium-5 large-5 columns" id="menu-group-select">
            <%= f.association :menu_group, collection: MenuGroup.all.order(:name), as: :select, label: "Choose restauant to filter Menu Group", :label_method => lambda { |menu_group| "#{menu_group.name}" } %>
         </div>
      </div>
      <div class="row">
         <div class="small-4 columns">
             <%= f.input :name %>
         </div>
         <div class="small-8 columns">
             <%= f.input :description, as: :text  %>
         </div>
      </div>
      <div class="row">
         <div class="small-4 columns">
         </div>
         <div class="small-4 columns">
             <%= f.input :price_low %>
         </div>
         <div class="small-4 columns">
            <%= f.input :price_high %>
         </div>
      </div>
      <div class="row">
         <div class="small-12 columns">
            <input type="text" id="add_tags" name="add_tags" placeholder="Add tags. Use commas to separate." />
         </div>
      </div>
     <div class="actions">
        <%= f.submit %>
     </div>
   <% end %>
</div>

<script>
    //Update possible content for season based on show tag.
    $('#food_restaurant_id').change(function() {
      var restaurant_id  = $(this).val();
      reloadEpisodeSelect(restaurant_id);
    });
  },

  reloadEpisodeSelect: function(restaurant_id) {
    console.log(restaurant_id);
    if(restaurant_id != ""){
      $.ajax({
        url: "/get_menu_groups_by_restaurant",
        cache: false,
        dataType: "html",
        type: "GET",
        data: { restaurant_id: restaurant_id }, // This goes to Controller in params hash
        success: function(menu_select){
          $('#menu-group-select').html(menu_select);
          bindEpisodeContentChangeListener();
         },
        error: function(error) {
          console.log("load episode select ajax error: ");
          console.log(error);
        }
      });
    }
   
</script>