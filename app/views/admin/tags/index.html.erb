<div class="row">
	<div class="small-12 columns">
		<h1>Manage Tags</h1>
	</div>
</div>

<div class="row">
	<div class="small-12 columns">
		<%= link_to raw('<i class="fi-plus"></i> New Tag'), new_tag_path, :class => "button tiny" %>
		<table class="small-12">
		  <thead>
		    <tr>
		      <th style="width: 56px;"></th>
		      <th>Tag</th>
 		      <th></th>
		      <th style="width: 28px;"></th>
		    </tr>
		  </thead>

		  <tbody>
		    <% @tags.each do |tag| %>
			<%
				resources_array = Array.new
				num_asset_libs = tag.asset_libraries.where(:site => current_site).size	
				num_assets = tag.assets.size
				num_contents = tag.contents.size
				if num_asset_libs > 0
					resources_array.push(link_to "Asset Libraries (#{num_asset_libs})", tag_asset_libraries_path(tag))
				end	
				if num_assets > 0
					resources_array.push(link_to "Assets (#{num_assets})", tag_assets_path(tag))
				end	
				if num_contents > 0
					resources_array.push(link_to "Pieces of Content (#{num_contents})", tag_contents_path(tag))
				end	
			%>
		      <tr>
		        <td>
					<%= link_to raw('<i class="fi-page-edit"></i>'), edit_tag_path(tag) %>
				</td>
				<td><%= tag.name %></td>
				<td>
					
					<%= resources_array.join(" | ").html_safe%>
				</td>
		        <td><%= link_to raw('<i class="fi-trash"></i>'), tag_path(tag), method: :delete, data: { confirm: 'Are you sure you want to remove this tag?' } %></td>
		      </tr>
		    <% end %>
		  </tbody>
		</table>
		
		<%= paginate @tags %>
	</div>
</div>